# 01-requirements.md - Smart Frequency Radar & Mastery Dashboard

## 1. 功能概述
本功能旨在解決使用者「記不住單字」以及「不知道單字是否常用」的痛點。透過引入離線詞頻數據庫，為翻譯後的單字提供常用度標記，並透過視覺化儀表板展示學習進度。

## 2. 核心需求

### A. 常用度感應系統 (Frequency Radar)
- **數據源**：內置 Top 20,000 詞頻表（如 COCA 或 CEFR 等級）。
- **顯示方式**：在翻譯 Tooltip 中顯示單字排名（例：#450）或等級（例：B2）。
- **視覺強化**：根據單字常用度調整高亮顏色深度。
    - 高頻詞（Top 3000）：亮色（醒目），提示使用者優先掌握。
    - 低頻詞（Top 10000+）：淡色，提示使用者僅需了解，無需死記。

### B. 字彙覆蓋率儀表板 (Mastery Dashboard)
- **位置**：新增於 `history.html` 頁面。
- **指標**：
    - **常用詞覆蓋率**：展示使用者已翻譯/掌握的單字佔 Top 2000/5000 的比例。
    - **進度曲線**：基於 SRS 狀態，展示「已精通」單字的增長趨勢。

### C. 數據遷移與存儲 (Storage Migration)
- **欄位擴展**：`StorageService` 存儲的 translation 物件需新增 `frequency_rank` 欄位。
- **遷移機制**：安裝/更新後自動掃描舊數據並補齊頻率排名。

## 3. 技術限制與考量
- **性能**：高亮邏輯應限制在使用者曾查過的單字，避免全網頁掃描造成的效能降級。
- **離線支持**：頻率表需隨擴充功能打包，不依賴外部 API。
- **MV3 兼容**：數據處理邏輯集中在 Background Service Worker。

## 4. 驗收標準 (Acceptance Criteria)
1. 使用者查單字時，Tooltip 必須顯示該詞的頻率等級。
2. 網頁上的高亮標記應反映該詞的常用度（顏色深淺）。
3. 歷史紀錄頁面能正確顯示「詞彙掌握百分比」。
4. 舊有的翻譯紀錄能成功遷移並獲得頻率排名。