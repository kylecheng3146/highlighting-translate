# 03-ux-specification.md - Smart Frequency Radar UX Specification

## 1. 使用者路徑 (User Journeys)

### A. 首次發現常用詞
1. 使用者在閱讀 BBC 新聞時選取了單字 "subtle"。
2. **視覺反饋**：Tooltip 彈出，頂部顯眼處標示 `Rank #920 (Top 1%)`。
3. **心理感受**：使用者意識到這是核心詞彙，主動點擊音頻圖標多聽幾次。
4. **自動化行為**：該詞存入儲存空間，標記為 `learning` 狀態。

### B. 進度檢查 (儀表板)
1. 使用者使用擴充功能一週後，打開 `history.html`。
2. **視覺亮點**：頂部儀表板顯示 `Top 2000 Coverage: 15% (+2% this week)`。
3. **激勵機制**：看到進度條增長，使用者決定今天再多查 5 個高頻單字以達成週目標。

## 2. 異常與邊界案例處理 (Edge Cases)

| 案例 | 處理規範 |
| :--- | :--- |
| **詞頻庫查無此詞** | Tooltip 顯示 `Rank: Unknown` 或 `Rare/Specialized`。高亮樣式採用「低頻詞」預設樣式。 |
| **多重變體** | 如果選取 "studied"，系統應自動還原為原型 "study" 進行詞頻查詢，確保排名準確。 |
| **大量高亮導致效能下降** | 若頁面已存儲高亮超過 200 個，實施「視窗化渲染」：僅對可視範圍內的元素進行高亮處理。 |
| **離線狀態** | 由於詞頻庫是內置的，離線時功能依然完整，僅翻譯 API 會失效。 |

## 3. 使用者自定義與彈性 (Customization)

- **頻率開關**：使用者可以在設定頁面關閉「常用度標籤」，若他們覺得這會造成壓力。
- **門檻調整**：允許使用者定義何謂「高頻」（預設 3000，可調整為 2000 或 5000）。
- **顏色自定義**：提供 3 組配色方案（經典、深色、高對比度），確保色弱使用者也能分辨等級。

## 4. 效能與技術指標 (UX Performance)

- **Tooltip 延遲**：詞頻查詢必須在 10ms 內完成（本地 Map 查詢）。
- **同步開銷**：每次查詞後，儀表板數據應在背景靜默更新，不得卡頓 UI。
- **儲存容量**：詞頻資訊僅存儲一個整數 (`rank`)，對 `chrome.storage` 的空間佔用微乎其微。

## 5. 成功指標 (Success Metrics)

1. **平均掌握等級**：使用者存儲的單字中，高頻詞佔比是否提升。
2. **回訪率**：歷史頁面儀表板的使用頻率。
3. **SRS 轉化率**：單字從 `learning` 進入 `mastered` 的平均天數縮短。
